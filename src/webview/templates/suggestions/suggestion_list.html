{% extends "base.html" %}
{% load viewutils %}

{% block content %}

<div class="column gap">
  {% if package_filter is not None %}

  <div>
    <h1 class="page-title row gap-small centered"><i class="icon-search"></i>Suggestions search</h1>
    <div class="column gap-small">
      <div class="rounded-box {% if suggestion_contexts|length == 0 %}hl-red{% else %}hl-green{% endif %} column gap-small">
        <div class="row gap-small baseline"><i class="icon-folder"></i>With package: <span class="bold">{{package_filter}}</span></div>
        <div>
          {% if suggestion_contexts|length == 0 %}
          <p>No matching suggestions found</p>
          {% else %}
          <p>Found {{ suggestion_contexts|length }} matching suggestions</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  {% elif status_filter == "pending" %}

  <div>
    <h1 class="page-title row gap-small centered">{% status_icon "pending" %}Automatically generated suggestions</h1>
    <div class="prose">
      <p><button class="btn btn-gray inline-row gap-small centered" disabled>{% status_icon "rejected" %}Dismiss</button> to remove a suggestion from the queue.</p>
    </div>
  </div>

  {% elif status_filter == "rejected" %}

  <div>
    <h1 class="page-title row gap-small centered">{% status_icon "rejected" %}Dismissed suggestions</h1>
    <div class="prose">
      <p>These automatic suggestions were dismissed after initial triaging.</p>
      <p><button class="btn btn-green inline-row gap-small centered" disabled>{% status_icon "accepted" %}Accept suggestion</button> to select a suggestion for a revision.</p>
    </div>
  </div>

  {% elif status_filter == "accepted" %}

  <div>
    <h1 class="page-title row gap-small centered">{% status_icon "accepted" %}Accepted suggestions</h1>
    <div class="prose">
      <p><button class="btn btn-green inline-row gap-small centered" disabled>{% status_icon "published" %}Publish issue</button> to create a Nixpkgs security record and open a GitHub issue for tracking resolution. This action will notify maintainers and package subscribers, and cannot be revoked.</p>
      <p><button class="btn btn-gray inline-row gap-small centered" disabled>{% status_icon "rejected" %}Dismiss</button> to remove a suggestion from the queue.</p>
    </div>
  </div>

  {% elif status_filter == "published" %}

  <h1 class="page-title row gap-small centered">{% status_icon "published" %}Published suggestions</h1>

  {% endif %}

  <div class="column gap">
    {% for suggestion_context in suggestion_contexts %}
      {% suggestion suggestion_context %}
    {% endfor %}
  </div>

<div>
{% endblock content %}
